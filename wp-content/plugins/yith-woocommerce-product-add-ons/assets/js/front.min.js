function yith_wapo_replace_image(e,a=!1){var t=yith_wapo.replace_image_path,i=".yith_magnifier_zoom_magnifier, .zoomWindowContainer .zoomWindow";if(void 0!==e.data("replace-image")&&""!=e.data("replace-image")){var o=e.data("replace-image");void 0===jQuery(t).attr("wapo-original-img")&&(jQuery(t).attr("wapo-original-img",jQuery(t).attr("src")),jQuery(i).length&&jQuery(i).attr("wapo-original-img",jQuery(i).css("background-image").slice(4,-1).replace(/"/g,""))),jQuery(t).attr("src",o),jQuery(t).attr("srcset",o),jQuery(i).css("background-image","url("+o+")"),jQuery("#yith_wapo_product_img").val(o)}if(a&&void 0!==jQuery(t).attr("wapo-original-img")){var n=jQuery(t).attr("wapo-original-img"),d=jQuery(i).attr("wapo-original-img");jQuery(t).attr("src",n),jQuery(t).attr("srcset",n),jQuery(i).css("background-image","url("+d+")")}}function yith_wapo_check_required_fields(e){var a=!1,t=!1,i=yith_wapo.dom.single_add_to_cart_button;return jQuery("form.cart .yith-wapo-addon:not(.hidden) input, form.cart .yith-wapo-addon:not(.hidden) select, form.cart .yith-wapo-addon:not(.hidden) textarea").each(function(){let i=jQuery(this),o=i.parent(),n=i.parents("div.yith-wapo-addon.wapo-toggle").find("h3.wapo-addon-title.toggle-closed"),d=o.find(".yith-wapo-ajax-uploader");(i.attr("required")&&("checkbox"===i.attr("type")||"radio"===i.attr("type"))&&!i.parents(".yith-wapo-option").hasClass("selected")||i.attr("required")&&(""==i.val()||"Required"==i.val()))&&("highlight"===e&&("checkbox"===i.attr("type")||"radio"===i.attr("type")?o=o.parent():d?(d.css("border","1px dashed #f00"),d.css("background-color","#fee")):i.css("border","1px solid #f00"),o.find(".required-error").css("display","block"),n&&n.click()),t=!0,a=!0)}),"hide"==e&&(t?jQuery(i).hide():jQuery(i).fadeIn()),!a}function yith_wapo_conditional_logic_check(){jQuery("form.cart .yith-wapo-addon.conditional_logic").each(function(){var e=!0,a=!1;jQuery(this).data("addon_id");for(var t=jQuery(this).data("conditional_logic_display"),i=jQuery(this).data("conditional_logic_display_if"),o=String(jQuery(this).data("conditional_rule_addon")).split("|"),n=String(jQuery(this).data("conditional_rule_addon_is")).split("|"),d=0;d<o.length;d++){var r=o[d].split("-"),p=!1,c=!1;if("v"==r[0])jQuery(".variation_id").val()==r[2]&&(c=!0);else if(void 0!==r[1]){c=(jQuery("#yith-wapo-"+r[0]+"-"+r[1]).is(":checked")||jQuery("select#yith-wapo-"+r[0]).val()==r[1])&&!jQuery("#yith-wapo-addon-"+r[0]).hasClass("hidden");var l=jQuery("input#yith-wapo-"+r[0]+"-"+r[1]).val(),s=jQuery("textarea#yith-wapo-"+r[0]+"-"+r[1]).val();p=void 0!==l&&""!==l||void 0!==s&&""!==s}else c=jQuery("#yith-wapo-addon-"+o[d]+" input:checkbox:checked").length>0||jQuery("#yith-wapo-addon-"+o[d]+" input:radio:checked").length>0||jQuery("#yith-wapo-addon-"+o[d]+" option:selected").length>0;"selected"==n[d]?c?a=!0:e=!1:"not-selected"==n[d]?c?e=!1:a=!0:"empty"==n[d]?p?e=!1:a=!0:"not-empty"==n[d]&&(p?a=!0:e=!1)}"all"==i&&e?"show"==t?jQuery(this).fadeIn().removeClass("hidden"):jQuery(this).hide().addClass("hidden"):"any"==i&&a?"show"==t?jQuery(this).fadeIn().removeClass("hidden"):jQuery(this).hide().addClass("hidden"):"show"==t?jQuery(this).hide().addClass("hidden"):jQuery(this).fadeIn().removeClass("hidden")})}function updateContainerProductPrice(e){let a=jQuery("#yith-wapo-container"),t=0;void 0!==e.display_price&&(t=e.display_price),a.attr("data-product-price",t)}function yith_wapo_ajax_upload_file(e,a,t){let i=calculate_exact_file_size(a);return t.parent().find(".yith-wapo-ajax-uploader").append('<div class="loader"></div>'),jQuery.ajax({url:yith_wapo.ajaxurl,type:"POST",contentType:!1,processData:!1,data:e,success:function(e){var a=t.parent();a.find(".yith-wapo-ajax-uploader .loader").remove(),a.find(".yith-wapo-ajax-uploader").hide();var o=e.replace(/^.*[\\\/]/,"");a.find(".yith-wapo-uploaded-file .info").html(o+"<br />"+i),a.find(".yith-wapo-uploaded-file").fadeIn(),a.find("input.option").val(e).change()},error:function(e){}}),!1}function calculate_exact_file_size(e){let a=0,t=e.size,i=0;for(;t>900;)t/=1024,i++;return Math.round(100*t)/100+" "+["Bytes","KB","MB","GB"][i]}function yith_wapo_check_required_min_max(){if(!checkRequiredSelect()||!yith_wapo_check_required_fields("highlight"))return!1;var e=0,a="";return jQuery("form.cart .yith-wapo-addon:not(.hidden)").each(function(){(a=yith_wapo_check_min_max(jQuery(this),!0))>0&&(e+=a)}),!(e>0)}function yith_wapo_check_min_max(e,a=!1){var t=e.data("min"),i=e.data("max"),o=e.data("exa"),n=e.find('input:checkbox:checked, input:radio:checked, option:not([value=""]):not([value="default"]):selected').length;let d=e.find("h3.wapo-addon-title.toggle-closed");if(o>0){var r=0;return o==n?(e.removeClass("required-min"),e.find(".min-error, .min-error span").hide(),e.find("input:checkbox").not(":checked").attr("disabled",!0)):(a&&(r=o-n,e.addClass("required-min"),e.find(".min-error").show(),1==r?(e.find(".min-error-an, .min-error-option").show(),e.find(".min-error-qty").hide()):(e.find(".min-error-an, .min-error-option").hide(),e.find(".min-error-qty, .min-error-options").show(),e.find(".min-error-qty").text(r)),d&&d.click()),e.find("input:checkbox").not(":checked").attr("disabled",!1)),r}if(i>0&&(i>n?e.find("input:checkbox").not(":checked").attr("disabled",!1):e.find("input:checkbox").not(":checked").attr("disabled",!0)),t>0){var r=0;return t<=n?(e.removeClass("required-min"),e.find(".min-error, .min-error span").hide()):(r=t-n,a&&(e.addClass("required-min"),e.find(".min-error").show(),1==r?(e.find(".min-error-an, .min-error-option").show(),e.find(".min-error-qty, .min-error-options").hide()):(e.find(".min-error-an, .min-error-option").hide(),e.find(".min-error-qty, .min-error-options").show(),e.find(".min-error-qty").text(r)),d&&d.click())),r}}function checkRequiredSelect(){let e=!0;return jQuery(".yith-wapo-addon.yith-wapo-addon-type-select select").each(function(){let a=jQuery(this);if(a.is(":required")){let t=a.parents(".yith-wapo-addon");if("default"===a.val()&&!t.hasClass("hidden")&&(e=!1,1)){let i=t.find(".min-error, .min-error-an, .min-error-option"),o=a.parents("div.yith-wapo-addon.wapo-toggle").find("h3.wapo-addon-title.toggle-closed");t.addClass("required-min"),o&&o.click(),t.css("border","1px solid #f00"),i.show()}}}),e}function yith_wapo_check_multiplied_price(e){let a=e.data("price"),t=e.data("price-sale"),i=e.data("default-price"),o=e.data("price-type"),n=e.data("price-method"),d="price",r=0,p=e.val();(!i>0&&(t>0&&"number"!==e.attr("type")&&"multiplied"===o&&(a=t,d="price-sale"),i=a,e.data("default-price",i)),"value_x_product"==n)?r=p*parseFloat(jQuery("#yith-wapo-container").data("product-price")):"multiplied"==o&&(r=p*i),r>0&&e.data(d,r)}function yith_wapo_check_multiplied_length(e){var a=e.data("price"),t=e.data("default-price");!t>0&&(t=a,e.data("default-price",t));var i=e.data("price-type");if(e.data("price-method"),"characters"==i){var o=e.data("remove-spaces"),n=e.val().length;o&&(n=e.val().replace(/\s+/g,"").length),e.data("price",n*t)}}jQuery("body").on("change",".yith-wapo-addon-type-checkbox input",function(){var e=jQuery(this).parents(".yith-wapo-option");jQuery(this).is(":checked")?(e.addClass("selected"),e.hasClass("selection-single")&&(e.parent().find("input").prop("checked",!1),e.parent().find(".selected").removeClass("selected"),e.find("input").prop("checked",!0),e.addClass("selected")),yith_wapo_replace_image(e)):(e.removeClass("selected"),yith_wapo_replace_image(e,!0))}),jQuery("body").on("change",".yith-wapo-addon-type-color input",function(){var e=jQuery(this).parent();e.hasClass("yith-wapo-option")||(e=e.parent()),jQuery(this).is(":checked")?(e.addClass("selected"),e.hasClass("selection-single")&&(e.parent().find("input").prop("checked",!1),e.parent().find(".selected").removeClass("selected"),e.find("input").prop("checked",!0),e.addClass("selected")),yith_wapo_replace_image(e)):(e.removeClass("selected"),yith_wapo_replace_image(e,!0))}),jQuery("body").on("change",".yith-wapo-addon-type-label input",function(){var e=jQuery(this).parent();e.hasClass("yith-wapo-option")||(e=e.parent()),jQuery(this).is(":checked")?(e.addClass("selected"),e.hasClass("selection-single")&&(e.parent().find("input").prop("checked",!1),e.parent().find(".selected").removeClass("selected"),e.find("input").prop("checked",!0),e.addClass("selected")),yith_wapo_replace_image(e)):(e.removeClass("selected"),yith_wapo_replace_image(e,!0))}),jQuery("body").on("change",".yith-wapo-addon-type-product input",function(){var e=jQuery(this).parent();e.hasClass("yith-wapo-option")||(e=e.parent()),jQuery(this).is(":checked")?(e.addClass("selected"),e.hasClass("selection-single")&&(e.parent().find("input").prop("checked",!1),e.parent().find(".selected").removeClass("selected"),e.find("input").prop("checked",!0),e.addClass("selected")),yith_wapo_replace_image(e)):(e.removeClass("selected"),yith_wapo_replace_image(e,!0))}),jQuery("body").on("change",".yith-wapo-addon-type-radio input",function(){var e=jQuery(this).parent();e.hasClass("yith-wapo-option")||(e=e.parent()),jQuery(this).is(":checked")?(e.addClass("selected"),yith_wapo_replace_image(e),e.siblings().removeClass("selected")):e.removeClass("selected")}),jQuery("body").on("change",".yith-wapo-addon-type-select select",function(){let e=jQuery(this).parent(),a=jQuery(this).find("option:selected"),t=e.find("div.option-image");e.hasClass("yith-wapo-option")||(e=e.parent());var i=a.data("image"),o=a.data("description"),n=e.find("p.option-description");void 0!==i&&i&&(i='<img src="'+i+'" style="max-width: 100%">',t.html(i)),"default"===a.val()?t.hide():t.fadeIn(),void 0===o?n.empty():n.html(o),yith_wapo_replace_image(a)}),jQuery(".yith-wapo-addon-type-select select").trigger("change"),jQuery(document).on("click",".yith-wapo-addon.wapo-toggle .wapo-addon-title",function(){let e=jQuery(this),a=e.parents(".yith-wapo-addon");a.hasClass("toggle-open")?a.removeClass("toggle-open").addClass("toggle-closed"):a.removeClass("toggle-closed").addClass("toggle-open"),e.hasClass("toggle-open")?e.removeClass("toggle-open").addClass("toggle-closed"):e.removeClass("toggle-closed").addClass("toggle-open"),e.parent().find(".options").toggle("fast"),jQuery(document).trigger("yith_proteo_inizialize_html_elements")}),window.setInterval(function(){yith_wapo_conditional_logic_check()},1e3),jQuery("form.cart .yith-wapo-addon").on("change","*",function(){yith_wapo_conditional_logic_check()}),jQuery(this).on("yith-wapo-reload-addons",function(e,a=""){jQuery("#yith-wapo-container").css("opacity","0.5");var t={action:"live_print_blocks",addons:jQuery("form.cart").serializeArray()};return""!=a&&(t.price=a),jQuery.ajax({url:yith_wapo.ajaxurl,type:"post",data:t,success:function(e){jQuery("#yith-wapo-container").html(e),yith_wapo_conditional_logic_check(),jQuery("#yith-wapo-container").css("opacity","1")}}),!1}),jQuery(this).on("found_variation",function(e,a){updateContainerProductPrice(a),jQuery(this).trigger("yith-wapo-reload-addons")}),jQuery("form.cart").on("change","#price_calculator",function(){var e=jQuery("#price_calculator .product_price .amount").text().replace(",",".");e=e.replace(/[^0-9\.-]+/g,""),jQuery("form.cart").trigger("yith-wapo-reload-addons",[e])}),jQuery("html").on("dragover",function(e){e.preventDefault(),e.stopPropagation()}),jQuery("html").on("drop",function(e){e.preventDefault(),e.stopPropagation()}),jQuery(".yith-wapo-ajax-uploader").on("dragenter",function(e){e.stopPropagation(),e.preventDefault(),jQuery(this).css("opacity","0.5")}),jQuery(".yith-wapo-ajax-uploader").on("dragover",function(e){e.stopPropagation(),e.preventDefault()}),jQuery(".yith-wapo-ajax-uploader").on("dragleave",function(e){e.stopPropagation(),e.preventDefault(),jQuery(this).css("opacity","1")}),jQuery(".yith-wapo-ajax-uploader").on("drop",function(e){e.stopPropagation(),e.preventDefault();var a=jQuery(this).parent().find("input.file"),t=e.originalEvent.dataTransfer.files[0],i=new FormData;i.append("action","upload_file"),i.append("file",t),yith_wapo.upload_allowed_file_types.includes(t.name.split(".").pop().toLowerCase())?t.size<=1048576*yith_wapo.upload_max_file_size?yith_wapo_ajax_upload_file(i,t,a):alert("Error: max file size "+yith_wapo.upload_max_file_size+" MB!"):alert("Error: not supported extension!")}),jQuery("#yith-wapo-container").on("click",".yith-wapo-ajax-uploader .button, .yith-wapo-ajax-uploader .link",function(){jQuery(this).parent().parent().find("input.file").click()}),jQuery("#yith-wapo-container").on("change",".yith-wapo-addon-type-file input.file",function(){var e=jQuery(this),a=jQuery(this)[0].files[0],t=new FormData;t.append("action","upload_file"),t.append("file",a),yith_wapo.upload_allowed_file_types.includes(a.name.split(".").pop().toLowerCase())?a.size<=1048576*yith_wapo.upload_max_file_size?yith_wapo_ajax_upload_file(t,a,e):alert("Error: max file size "+yith_wapo.upload_max_file_size+" MB!"):alert("Error: not supported extension!")}),jQuery("#yith-wapo-container").on("click",".yith-wapo-uploaded-file .remove",function(){jQuery(this).parent().hide(),jQuery(this).parent().parent().find(".yith-wapo-ajax-uploader").fadeIn(),jQuery(this).parent().parent().find("input").val(""),jQuery(this).parent().parent().find("input.option").change()}),jQuery("form.cart").on("click","span.checkboxbutton",function(){jQuery(this).find("input").is(":checked")?jQuery(this).addClass("checked"):jQuery(this).removeClass("checked")}),jQuery("form.cart").on("click","span.radiobutton",function(){jQuery(this).find("input").is(":checked")&&(jQuery(this).parent().parent().parent().find("span.radiobutton.checked").removeClass("checked"),jQuery(this).addClass("checked"))}),jQuery(".yith-wapo-addon-type-checkbox, .yith-wapo-addon-type-color, .yith-wapo-addon-type-label, .yith-wapo-addon-type-product").each(function(){yith_wapo_check_min_max(jQuery(this))}),jQuery("body").on("change",".yith-wapo-addon-type-checkbox, .yith-wapo-addon-type-color, .yith-wapo-addon-type-label, .yith-wapo-addon-type-product",function(){yith_wapo_check_min_max(jQuery(this))}),jQuery("body").on("click","form.cart button",function(){return yith_wapo_check_required_min_max()?jQuery("form.cart .yith-wapo-addon.conditional_logic.hidden").remove():jQuery("html, body").animate({scrollTop:jQuery("#yith-wapo-container").offset().top},500),yith_wapo_check_required_min_max()}),jQuery(document).on("click",".add-request-quote-button",function(e){e.preventDefault(),yith_wapo_check_required_min_max()||(yith_wapo_general.do_submit=!1)}),jQuery("body").on("change keyup",".yith-wapo-addon-type-number input",function(){yith_wapo_check_multiplied_price(jQuery(this))}),jQuery(".yith-wapo-addon-type-text, .yith-wapo-addon-type-textarea").on("change","input, textarea",function(){yith_wapo_check_multiplied_length(jQuery(this))}),jQuery(".wapo-product-qty").keyup(function(){var e=jQuery(this).data("product-id"),a=jQuery(this).val();jQuery(this).parent().find("a").attr("href","?add-to-cart="+e+"&quantity="+a)}),jQuery(".single-product").on("change","#wapo-datepicker-time select",function(){var e=jQuery(this).val();jQuery("#temp-time").text(e),jQuery(".ui-state-active").click()}),jQuery(".single-product").on("click","#wapo-datepicker-save button",function(){jQuery(".hasDatepicker").datepicker("hide")});
